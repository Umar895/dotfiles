unbind-key C-b                                                        # Unbind default prefix
set-option -g prefix C-x                                              # Set C-x as prefix
bind-key C-x send-prefix                                              # When C-x is pressed, send prefix to tmux window

set -g base-index 1                                                   # Start window counting from 1
setw -g pane-base-index 1                                             # Start pane counting from 1

bind s split-window -h                                                # Use prefix-s to split vertically
bind h split-window -v                                                # Use prefix-h to split horizontally

bind -n C-h resize-pane -L 5                                          # C-h move splitter left
bind -n C-j resize-pane -D 5                                          # C-j move splitter down
bind -n C-k resize-pane -U 5                                          # C-k move splitter up
bind -n C-l resize-pane -R 5                                          # C-l move splitter right

bind -n  M-1 select-window -t 1                                       # Alt-1 to jump to window 1
bind -n  M-2 select-window -t 2                                       # Alt-2 to jump to window 2
bind -n  M-3 select-window -t 3                                       # Alt-3 to jump to window 3
bind -n  M-4 select-window -t 4                                       # Alt-4 to jump to window 4
bind -n  M-5 select-window -t 5                                       # Alt-5 to jump to window 5
bind -n  M-6 select-window -t 6                                       # Alt-6 to jump to window 6
bind -n  M-7 select-window -t 7                                       # Alt-7 to jump to window 7
bind -n  M-8 select-window -t 8                                       # Alt-8 to jump to window 8
bind -n  M-9 select-window -t 9                                       # Alt-9 to jump to window 9

set -g default-terminal "screen-256color"                             # Use 256 color mode

set -g renumber-windows on                                            # Automatically renumber window numbers on closing a pane

set -g pane-border-fg blue                                            # Border color of panes
set -g pane-active-border-fg green                                    # Border color of active pane

set -g status-bg colour234                                            # Set statusline background color
set -g status-fg colour137                                            # Set statusline foreground color
set -g status-attr dim                                                # Give statusline an attribute
set -g status-left ' '                                                # Leave an empty space at left of statusline
set -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m/%y \
#[fg=colour233,bg=colour245,bold] %H:%M '                             # Set format of right section of statusline

setw -g window-status-current-fg colour81                             # Set statusline active window foreground color
setw -g window-status-current-bg colour238                            # Set statusline active window background color
setw -g window-status-current-attr bold                               # Give statusline active window an attribute
setw -g window-status-current-format \
' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour50]#F '               # Set statusline active window format

setw -g window-status-fg colour138                                    # Set statusline window foreground color
setw -g window-status-bg colour235                                    # Set statusline window background color
setw -g window-status-format \
' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '              # Set statusline window format (consistent)

# Messages e.g. when prefix-: is pressed
set -g message-attr bold                                              # Make tmux messages bold
set -g message-fg colour232                                           # Set messages foreground color
set -g message-bg colour166                                           # Set messages background color

set-option -g status-position bottom                                  # Position status bar at the bottom

is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n M-h if-shell "$is_vim" "send-keys C-h"  "select-pane -L"  # Alt-h to jump to left pane, from vim
bind-key -n M-j if-shell "$is_vim" "send-keys C-j"  "select-pane -D"  # Alt-j to jump to pane below, from vim
bind-key -n M-k if-shell "$is_vim" "send-keys C-k"  "select-pane -U"  # Alt-k to jump to pane above, from vim
bind-key -n M-l if-shell "$is_vim" "send-keys C-l"  "select-pane -R"  # Alt-l to jump to right pane, from vim
bind-key -T copy-mode-vi M-h select-pane -L                           # Alt-h to jump to left pane, from tmux
bind-key -T copy-mode-vi M-j select-pane -D                           # Alt-j to jump to pane below, from tmux
bind-key -T copy-mode-vi M-k select-pane -U                           # Alt-k to jump to pane above, from tmux
bind-key -T copy-mode-vi M-l select-pane -R                           # Alt-l to jump to right pane, from tmux

if-shell \
"[[ `tmux -V | cut -d' ' -f2` -lt 2.1 ]]" "setw -g mode-mouse off"    # Better copy-paste for tmux < v2.1
if-shell \
"[[ `tmux -V | cut -d' ' -f2` -ge 2.1 ]]" "setw -g mouse off"         # Better copy-paste for tmux >=v2.1
